<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>webpack 4 quickstart</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">

    <!--<script src="bundle/prod-bundle.css"></script>-->
</head>
<body>
<br>
<div class="main-container"></div>
<br>

<div class="fb-mount"></div>

<script type="module">
    function ready(callback) {
        if (document.readyState !== 'loading'){
            callback();
        } else if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', callback);
        } else {
            document.attachEvent('onreadystatechange', function() {
                if (document.readyState !== 'loading')
                    callback();
            });
        }
    }

    // now we execute the ready() function, passing a proper callback
    ready(function() {
        console.log('Entry point');

        const MyComponent = window.UniteLabs.Components.MyComponent;
        const myEl = new MyComponent();

        const mainContainer = document.getElementsByClassName('main-container').item(0);

        if (mainContainer) {
            myEl.setName( 'Hello Master!' );
            myEl.setList( [ 0, 3, 6, 89 ] );
            mainContainer.appendChild( myEl );

            setTimeout( () => {

                const newList = window.UniteLabs.UtilityService.updateList( myEl.list );

                console.log('Set New List: ', newList);

                myEl.setList( newList );

                // myEl.setName( newList.toString() );
                myEl.setName('Hello Mr! I am modern now! I evolved in 2 secs!')

            }, 2000);
        }

        let fb = new window.UniteLabs.FormBuilder({
            selector: 'fb-mount',
            bootstrapData: [
                {
                    "label": "Do you have a website?",
                    "field_type": "website",
                    "required": false,
                    "field_options": {},
                    "cid": "c1"
                },
                {
                    "label": "Please enter your clearance number",
                    "field_type": "text",
                    "required": true,
                    "field_options": {},
                    "cid": "c6"
                },
                {
                    "label": "Security personnel #82?",
                    "field_type": "radio",
                    "required": true,
                    "field_options": {
                        "options": [{
                            "label": "Yes",
                            "checked": false
                        }, {
                            "label": "No",
                            "checked": false
                        }],
                        "include_other_option": true
                    },
                    "cid": "c10"
                },
                {
                    "label": "Medical history",
                    "field_type": "file",
                    "required": true,
                    "field_options": {},
                    "cid": "c14"
                }
            ]
        });

        fb.save((payload) => console.log('logged from here: ', payload));
    });
</script>

<!--<script src="bundle/prod-bundle.min.js"></script>-->
</body>
</html>
